<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/5.2.0/css/mdb.min.css">

<div *ngIf="errorMessage" class="alert alert-danger">
  {{ errorMessage }}
</div>

<!-- Conteneur pour les boutons et la recherche -->
<div class="d-flex justify-content-between mb-3">
  <!-- Bouton Ajouter -->
  <button type="button" class="btn custom-btn-success" [routerLink]="['/add-doc-type']">
    <i class="fas fa-plus"></i>
  </button>
  
  <!-- Espace pour pousser le champ de recherche vers la droite -->
  <div class="ml-auto"></div>

   <!-- Champ de recherche avec bouton -->
   <div class="input-group">
     <div class="form-outline">
       <input
         type="search"
         id="searchInput"
         class="form-control custom-input"
         placeholder="Recherche..."
         [(ngModel)]="searchQuery"
         (ngModelChange)="searchDocumentTypes()"
       />
     </div> 
     <button type="button" class="btn btn-warning">
       <i class="fas fa-search"></i>
     </button>
   </div>
</div>

<div class="card">
  <div class="card-header" style="background-color: #829B66; color: white; padding: 0.5rem;">
    <h4 class="card-title mb-0" style="font-size: 1.1rem;">Liste des Types de Documents</h4>
  </div>
  <div class="card-body" style="padding: 0;">
    <table class="table table-striped small-table" style="width: 100%; border: 1px solid #E2F1CD;">
      <thead>
        <tr>
          <th>Libellé</th>
          <th>Description</th>
          <th>État</th>
          <th class="text-center">Opérations</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let document of documentTypes | paginate: { itemsPerPage: pageSize, currentPage: page }">
          <td>{{ document.documentTypeLibelle }}</td>
          <td>{{ limitDescription(document.documentTypeDescription) }}</td>
          <td>{{ document.documentTypeEtat }}</td>
          <td class="text-center">
            <a [routerLink]="['/docTypes', document.id]" class="btn btn-info btn-sm mx-1 text-white" style="width: 35px; height: 35px; padding: 0;">
              <i class="fas fa-eye" style="line-height: 35px;"></i>
            </a>
            <a [routerLink]="['/updateDocument', document.id]" class="btn btn-warning btn-sm mx-1 text-white" style="width: 35px; height: 35px; padding: 0;">
              <i class="fas fa-edit" style="line-height: 35px;"></i>
            </a>
            <button type="button" class="btn btn-danger btn-sm mx-1 text-white" (click)="deleteDocumentType(document.id)" style="width: 35px; height: 35px; padding: 0;">
              <i class="fas fa-trash-alt" style="line-height: 35px;"></i>
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<div class="d-flex flex-column align-items-center mt-3">
  <div class="mb-2">
    Affichage {{ (page - 1) * pageSize + 1 }} - {{ page * pageSize < documentTypes.length ? page * pageSize : documentTypes.length }} de {{ documentTypes.length }} éléments
  </div>
  <pagination-controls (pageChange)="page = $event" previousLabel="«" nextLabel="»"></pagination-controls>
</div>
